# refactor(app-router): migration Pages Router → App Router Next.js 13+

## Objectif

Migrer l'architecture Next.js du Pages Router vers le App Router (Next.js 13+), réorganiser la structure des fichiers dans le dossier `app/`, optimiser les composants et corriger les typos des props.

## Raison du changement

- **Next.js 13+ standard** : App Router est la nouvelle architecture recommandée
- **Meilleure organisation** : Structure flat `app/` à la place de `pages/` + `components/`
- **Composants Server/Client** : Directive `use client` pour interactivité
- **Optimisations** : Next.js Image, nouvelles conventions de fichiers
- **Corrections** : Typos des props (`text_button_oulined` → `text_outlined`)
- **Séparation données/composants** : `items-feature.ts` et `items-highlight.ts` à la racine `app/`

## Changements principaux

### Structure avant/après

Modification de la strucure pour une plus standard

```text
AVANT (Pages Router)          |  APRÈS (App Router)
─────────────────────────────┼─────────────────────────
pages/                        |  app/
├── _app.tsx                  |  ├── layout.tsx
├── _document.tsx             |  ├── head.tsx
└── index.tsx                 |  ├── page.tsx
                              |  ├── components/
components/                   |  │   ├── section-hero.tsx
├── section-hero.tsx          |  │   ├── section-feature.tsx
├── section-feature.tsx       |  │   ├── section-contact.tsx
├── section-contact.tsx       |  │   ├── form-contact.tsx
├── form-contact.tsx          |  │   └── section-highlight.tsx
└── section-highlight.tsx     |  ├── items-feature.ts (NEW)
                              |  ├── items-highlight.ts (NEW)
themes/                       |  └── styles/
├── palette.ts                |      ├── fonts.ts (NEW)
├── typogrphy.ts              |      ├── theme-palette.ts
├── component.ts              |      ├── theme-typogrphy.ts
└── theme.ts                  |      ├── theme-component.ts
                              |      └── theme-global.ts
```

### Fichiers créés (App Router)

1. **app/layout.tsx** - Layout racine
   - Remplace `pages/_app.tsx` + `pages/_document.tsx`
   - Metadata + Viewport exports
   - ThemeProvider + CssBaseline
   - Polices Google Fonts en variables CSS

2. **app/head.tsx** - Head personnalisé
   - Preload Google Fonts
   - Meta charset, crossOrigin
     Il faudra trouver un moyen plus propre

3. **app/page.tsx** - Page d'accueil
   - Remplace `pages/index.tsx`
   - Import composants + données (ITEMS_FEATURES, ITEMS_HIGHLIGHT) : separer pour faciliter la modification de la page
   - Container responsif

4. **app/components/section-hero.tsx** - Composant héro (réécrit)
   - Props revues : `image` React.ReactNode au lieu de `src_image` : pour faciliter la gestion de limage
   - Support icônes
   - Variants (page/div/...) pour distinguer les section des autre utilisation
   - Correction typo : `text_outlined`

5. **app/components/section-feature.tsx** - Réorganisé
   - Directive `use client` (useState)
   - Export interface `propItemFeature`
   - Suppression ITEMS_FEATURES (moved to `items-feature.ts`)
   - Props par défaut vides
   - Correction typo : `text_outlined`

6. **app/components/section-contact.tsx** - Simplifié
   - Props flexibles (vides par défaut)
   - Remplacé `text_button_oulined` → `text_outlined`
   - Remplacé `src_image` → `image`

7. **app/components/form-contact.tsx** - Amélioré
   - Import `Image` de next/image
   - TextField 'Sujet' ajouté
   - SectionHero intégré avec logo
   - Responsive sx={{ minWidth: { xs: '100%', md: 400 } }}

8. **app/components/section-highlight.tsx** - Nouvelle
   - Typo corrigée : `text_button_oulined` → `text_outlined` (ligne 27)
   - Grid container avec responsive xs/sm/md/lg/xl

9. **app/styles/fonts.ts** - Polices Google
   - Roboto_Mono + Righteous
   - Variables CSS (--font-roboto-mono, --font-righteous)
   - Display swap

10. **app/styles/theme-global.ts** - Fusion thème (NEW)
    - Renommé anciennement `themes/theme.ts`
    - Agrège palette + typography + components
    - Export default pour layout.tsx

11. **app/styles/theme-component.ts**
    - Renommé (anciennement themes/component.ts)
    - Import depuis `./theme-typogrphy`
    - MuiPaper : margin/padding 0 (avant commenté) pour etre certain

12. **app/styles/theme-typogrphy.ts**
    - Renommé (anciennement themes/typogrphy.ts)
    - Retire imports @fontsource (polices via next/font)
    - Palette + Typography en createTheme
    - FontSize en SIZE \* multiplier (8px base) : je voulai garder l'odre des couleur mais la taille des police été trop grosse

13. **app/styles/theme-palette.ts**
    - Renommé (anciennement `themes/palette.ts`)
    - Pas de changement fonctionnel
    - Formatage semi-colons

14. **app/items-feature.ts** (NEW) - Données features
    - `ITEMS_FEATURES` array
    - Import type `propItemFeature`
    - 3 items avec icônes emoji + images Unsplash/Pexels
    - Descriptions French

15. **app/items-highlight.ts** (NEW) - Données highlights
    - `ITEMS_HIGHLIGHT` array
    - 6 items (Stack moderne, Architecture, Responsive, etc.)
    - Descriptions French

## Notes importantes

1. **App Router** : Nouvelle architecture Next.js 13+ (meilleure performance)
2. **Layout racine** : Remplace `_app.tsx` et `_document.tsx`
3. **use client** : Directive sur section-feature.tsx (useState)
4. **Google Fonts** : Via `next/font/google` (optimisé automatiquement)
5. **Metadata API** : Remplace next/head pour SEO
6. **Données séparées** : `items-feature.ts` et `items-highlight.ts` pour réutilisation
7. **Typos corrigées** : Props harmonisées et cohérentes
8. **React.ReactNode images** : Plus flexible que `src_image` string

## Ressources

- [Next.js App Router](https://nextjs.org/docs/app)
- [next/font](https://nextjs.org/docs/app/building-your-application/optimizing/fonts)
- [Metadata API](https://nextjs.org/docs/app/building-your-application/optimizing/metadata)
- [Server Components](https://nextjs.org/docs/getting-started/react-essentials)
- [MUI with Next.js](https://mui.com/material-ui/guides/next-js-app-router/)

---

**Fichiers migré vers app/** : 13 (layout, head, page, 5 composants, 4 styles, 2 données)
**Fichiers supprimés** : 13 (pages/, themes/, types/, components/)
**Corrections typos** : 8 (props harmonisées)
**Lignes de code** : ~900+ (nouveau layout + données + styles optimisés)
